#### 前缀索引的缺点

- 可能会增加回表的次数

- 使用前缀索引就用不上覆盖索引对查询性能的优化，因为系统不确定前缀索引是否截取了完整信息，需要回到主一级索引去验证



#### 前缀索引使用优化

##### 1. 倒序存储

如果字段符的前部分重复度过高，则可以在字符串尾部截取一定长度建立索引

##### 2. 使用hash字段

新增一个整数字段，每次插入新记录时，使用crc32()得到一个hash码，并在这个整数字段上建立索引。由于hash会有冲突的现象，所以要同时判断是否满足原始字段和哈希字段(有额外的存储和计算消耗)

**2种优化方式，都只能支持等值查询** 



#### 问题

#####  1. 采用整个字符串作为索引，查询操作时，执行顺序是怎样的

​		使用完整字段的索引时，会找到符合条件的第一条记录，拿到主键id，再到主键索引去验证值是否正确。然后再返回到二级索引继续查找符合条件的记录，直到找到第一个不符合条件的记录为止。

最多只需要回主键索引取一次数据

##### 2. 采用部分字符作索引，查询时，执行顺序是怎样的

​		基本顺序与完整字段索引相同，但部分字段索引会存在查询到多条符合记录的情况，都要一一回到主键索引上去验证，增加了扫描的行数

##### 3. 怎么衡量不同长度前缀索引的区分度

​		不同长度前缀索引的唯一值个数与行数的比例，值越高代表区分度越高

##### 4. 前缀索引与全部索引的优缺点

​		全部索引会减少扫描的行数，但会增加空间的消耗

​		前缀索引会增加扫描的行数，减少空间的消耗

##### 5. 反序存储与hash字段索引的异同点

​		反序和hash都只能支持等值查询

​		反序只需要一次reverse，hash需要crc32计算，相比cpu消耗，hash要高点

​		反序和hash都会有重复的情况，但hash冲突的概率较小，查询的效率高些，反序由于重复值的存在，还是可		能会增加扫描的行数











